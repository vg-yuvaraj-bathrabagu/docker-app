# Release Notes
------------------------------------------------------------------------------------------------------------------------
## 0.7.0 - Cognito Integration 

1. Add Cognito access to `ecsInstanceRole` and `ecsTaskExecutionRole` roles by attaching the `AmazonCognitoPowerUser` and `AmazonECSTaskExecutionRolePolicy` policy
2. Reset the credentials by running `sh docker_clear_secret_oncloudtime.sh`

## 0.5.8 - 17 Jan 19

1. Added docker deployment infrastructure for EC2 

2. Timesheets:
- Ability to create projects and project assignments 
- Projects can be either Agile or Waterfall 
- Users can submit timesheets for the current week 

## 0.5.6 -  14 Dec 2018
1. File paths for users 
    * Added a home folder within the user directories paths
2. File Uploads
  - Removed the convert to ORC and Parquet actions which are not relevant with the custom formats on the Templates 
3. Templates
    * Changed the options for format to Text, Parquet, Orc, JSON
    * Changed the delimiter to only a single value, comma 
    * When a user template is created for ORC, Parquet and JSON - external tables for the formats are created in addition to a text table 
    * When a core template is created for ORC, Parquet and JSON - external tables for the shared formats are created in addition to a text table 
    * Added a spinner when uploading a sample row 
4. Queries
    * Query output url uses the CSV file generated by athena when running te query 
5. File uploads
    * A file validation has been added to ensure that a file cannot be uploaded to a template more than once 
    * Only files uploaded to templates of type core can be shared as they have a shared directory across users 
    * Files are uploaded to the new directory structure which includes a folder for the template format 
6. Added a spinner showing progress for each of the forms on the site to show progress and prevent double submission
7. Reports - removed tables until the way to search columnar formats for uploaded files is resolved 

Deployment instructions:
=========================    
1. Unzip package 
2. Copy files 
3. Run deploy.sh to set permissions & clear cache `sh /var/www/html/oncloudtime/deploy.sh` 
4. Default credentials are:
    * Super Admin -  username: admin3@oncloudtime.com, password: 12345678
    * Admin - username: ATS003@oncloudtime.com, password: 12345678
    * Regular user - username: ATS0043@oncloudtime.com, password: 12345678
5. Documentation
    * User Manual - docs/oncloudtime-usermanual.pdf
------------------------------------------------------------------------------------------------------------------------
## 0.5.3 - 22 Oct 2018 
1. User Accounts
    * Fixed error on updating user account 
    * Added a validation to ensure a role is selected when creating or updating a user 
    * Merged all user account fields from the employee table 
2. SQS
    * All data used to execute any action is sent as part of the SQS message 
3. Templates 
    * Added handling for errors when loading the sample row 
4. Test Cases and flows documented in test-cases.md file in this directory 
5. NOT Done: 
    * Disabling the submit buttons after submission - requires changes in very many places so put it on hold  

Deployment instructions:
=========================    
1. Unzip package 
2. Copy files 
3. Run deploy.sh to set permissions & clear cache `sh /var/www/html/oncloudtime/deploy.sh` 
4. Run the script in sql/0.5.3.sql
5. Default credentials are:
    * Super Admin -  username: admin3@oncloudtime.com, password: 12345678
    * Admin - username: ATS003@oncloudtime.com, password: 12345678
    * Regular user - username: ATS0043@oncloudtime.com, password: 12345678

------------------------------------------------------------------------------------------------------------------------

## 0.5.2 - 10 Oct 2018 
1. Accounts
    * Fixed SNS topics not being created with special characters 
    * Remove all characters that are not numbers or leters from the S3 folders derived from account names as this was causing issues for athena output
2. User Accounts 
    * Users can now only login using their email addresses not user accounts 
    * Removed the concept of username, now internal as the uuid of the user account for backwards compatibility 
    * 
3. Security 
    * Changed session timeout to 18 hours instead of 20  minutes 
4. File Upload 
    * Hide the folder paths 
5. Install script 
    * Migrate to using shell backend to create the .aws_config file, and save the configurations 
    * Set needs_update to 'yes' in the install.yaml to unlock the installer
    * Add SNS topic option to the installer 


Deployment instructions:
=========================    
1. Unzip package 
2. Copy files 
3. Run deploy.sh to set permissions & clear cache `sh /var/www/html/oncloudtime/deploy.sh` 
4. Run the script in sql/0.5.2.sql
5. Run installer at https://oncloudtime.com/install 
6. Default credentials are:
    * Super Admin -  username: admin3@oncloudtime.com, password: 12345678
    * Admin - username: ATS003@oncloudtime.com, password: 12345678
    * Regular user - username: ATS0043@oncloudtime.com, password: 12345678

------------------------------------------------------------------------------------------------------------------------

## 0.5.0 -

1. Accounts:

   - Creating an account requires specifying information for the account admin account which is created 
   - Each account has its own folder in the data directory with the name of the account 
   - Each account contains a shared directory where templates and other files can be copied by users with the admin role 
   - The admin role has the ability to reset the data in the account, however this is not supported for the super_admin role
   - An admin user can configure the dashboard, current and historical activity urls for their account. The iframe parts of the urls are added automatially

2. User and security :

   - Added a role for each of the available links in the left hand menu and associated functions 
   - An administrator can select the roles that a user can have 
   - User sessions automatically log out after 20 minutes that is controlled by the session.lifetime.seconds variable in config.yaml
   - Completed the flow from forgot password to resetting it via a link sent in email using SNS topics 
   - A user can change their password and edit their profile  

3. File Upload 

   - A user can only see the files they have uploaded and those in the shared folder 
   - Only a user with role `ROLE_ADMIN` can copy files from a user intake folder into the shared folder 
   - When a file is deleted, it is copied into a trash folder which is the same directory path as the original file with trash instead of data 
   - The only action that can happen on a folder in trash is to restore it to its original path 
   - An administrator or user with the appropriate privileges can recover a deleted file from the trash folder into the appropriate user or shared path

4. Template

   - Changed the template name validation to only allow letters, numbers, spaces and dashes. Other characters were causing issues when creating the Athena tables 
   - By default templates created by users are created of type User, pointing to the user template directory 
   - A an admin can create a core template which has a shared folder and can be seen by all users on the account 
   - Shared template folder: `s3://bucket/data/$account_name/shared/template/$template_name`
   - User template folder: 's3://bucket/data/$account_name/$username/intake/template/$template_name'
   - Admins can delete templates which in turn deletes the athena table, uploaded files and all folders 

5. Queries 
   - Queries created by users are of type User and only visible to them 
   - Queries of type core can be seen by other users

6. Each user can only see the data within their account, but a user with `ROLE_ADMIN` can see the data for other users within the account  

7. All forms now have error handling from the scripts in the backend which throw errors when a failure occurs 

8. Account Data Reset: 
    - Resetting of account data is limited to admin users
    - Created athena tables in templates are not deleted
    - User accounts have to be deleted manually  

9.  Renamed Simulation to Model
    
10. File Watcher:
    - Added model, template, security policy and schedule fields 
    - 
11. SNS integration
    - Added 2 new configuration variables: 
        - sns_topic_prefix: prefix for the SNS topics generated by the application 
        - sns_general_topic: general topic for application wide messages 
    - A general SNS topic oncloudtime-general is currenty hardcoded into the install.yaml file 
    - When an account is created an SNS topic oncloudtime-account-accountname is created to which all users on the account are automatically subscribed by email and the topic ARN is saved in the account table 
    - When a user account is created a topic oncloudtime-user-username is automatically created and the user subscribed to it by email. The topic ARN is saved in the account table 
    - When a user forgets their password the notification is sent to the topic specified for the user 

Deployment instructions:
=========================
1. Delete current directory `mv /var/www/html/oncloudtime /var/www/html/oncloudtime-0.4`
2. Unzip package - this will be a full release due upgrade of vendor module versions 
3. Create a new directory `/var/www/html/oncloudtime`
4. Copy files to the new directory 
5. Run deploy.sh to set permissions & clear cache `sh /var/www/html/oncloudtime/deploy.sh` 
6. Run the script in sql/0.5.0.sql
7. Edit `/var/www/html/oncloudtime/shell/.aws_config` to set the AWS_ACCESS_KEY_ID and  AWS_SECRET_ACCESS_KEY
8. Default credentials are:
    * Super Admin -  username: admin, password: 12345678
    * Admin - username: ATS003, password: 12345678
    * Regular user - username: ATS004, password: 12345678

------------------------------------------------------------------------------------------------------------------------

## 0.4.7 - 23 Jul 2018

1. File Upload
   * Files in intake folder can only be deleted, converted to ORC and Parquet 
   * Add a column showing the type of files whether User or Shared
   * All users can see the files in their intake and template folder, plus all files in the shared folder 
   * A user can only delete a file from the shared folder if they created the file or if they have the admin role  
   * Fixed an issue with the DataTables script as the page was being loaded twice inconsistent with the reset of the application
   * Changed the default Javascript alert to  
2. Added a script adddfiileuploadrecord.sh which shows the parameters necessary to insert a record for a file moved from the user intake folder to the template folder. 
3. Changed all references of Url to URL 
4. Shell Scripts 
   * Remove all AWS references in the scripts to use the .aws_config file 
5. Changed all Javascript prompts to modals 
6. Query results scroll to handle more rows and columns than can fit in the modal

Deployment instructions:
===

1. Unzip package 
2. Copy files 
3. Replace the AWS credentials in shell/.aws_config 
4. Run deploy.sh to set permissions & clear cache `sh /var/www/html/oncloudtime/deploy.sh` 

------------------------------------------------------------------------------------------------------------------------

## 0.4.6 - 21 Jul 2018

1. File Upload:
   * Change the approach for measuring the size of the uploaded file after it has been moved to the data directory which was causing an erorr for large file uploads 

Deployment instructions:
===

1. Unzip package 
2. Copy files 
3. Run deploy.sh to set permissions & clear cache `sh /var/www/html/oncloudtime/deploy.sh` 

Open Issues
===

1. Error handling within the bash scripts for the multi-step actions like file upload with s3 interaction and database inserts
2. Reset database does not delete the athena tables 

------------------------------------------------------------------------------------------------------------------------

## 0.4.5 - 19 Jul 2018

1. Update SQS message for file upload to include template information such as the id, name, uuid, input path 

2. Templates:

   * Remove all non-numeric numbers in the column name leaving on letters (A to Z) and numbers (0-9)
   * Create two tables and two queries for the user template and the shared template

3. Log files changed the file names to have the format $user.$time.$action.$uuid.log to make it easier to trace

4. File Upload:

   * Added a table containing the contents of the uploaded files
   * Each action, upload, copy to orc, copy to parquet and copy to template create a new record in file upload each of which creates a trail in the source column to enable the tracking of files
   * A user cannot see files uploaded by other users 
   * Only files in the intake folder can be copied to a template, converted to parquet and orc

Deployment instructions:
===

1. Unzip package 
2. Copy files 
3. Add the following to config.yaml in the shell section along with other scripts
   * fileuploadCreateFile: createfileupload.sh
   * fileuploadCopyToTemplate: copyfiletotemplatefolder.sh
   * fileuploadDelete: deletefileupload.sh
4. Run deploy.sh to set permissions & clear cache `sh /var/www/html/oncloudtime/deploy.sh` 
5. Run the script in sql/0.4.5.sql

Open Issues
===

1. Error handling within the bash scripts for the multi-step actions like file upload with s3 interaction and database inserts
2. Reset database does not delete the athena tables 

------------------------------------------------------------------------------------------------------------------------

## 0.4.3 - 17 Jul 2018

1. Reset feature uses marked up output and deletes existing notifications 
2. Added a type column to both templates and queries, which default to User but can only be changed by admin

Deployment instructions:
===

1. Unzip package 
2. Copy files 
3. Run deploy.sh to set permissions & clear cache `sh /var/www/html/oncloudtime/deploy.sh` 
4. Run the script in sql/0.4.3.sql

------------------------------------------------------------------------------------------------------------------------

## 0.4.2 - 17 Jul 2018

1. Menu changes: 
   * Rearrange the side menu items 
   * Give the top menu the same background color as AWS header
2. Change the shared folder name from athena to shared 
3. Change the style of notifications to match LinkedIn
4. Fixed the issue with the file search in the table directory 
5. Added the ability to reset applcation data:
   * Login as admin/12345678
   * Under Setup -> Reset Data
   * After resetting data, make sure to create a template in order to be able to upload files 

Deployment instructions:
===

1. Unzip package 
2. Copy files 
3. Run deploy.sh to set permissions & clear cache `sh /var/www/html/oncloudtime/deploy.sh` 
4. In the S3 bucket, create a folder with the name "shared" at the same level as data

------------------------------------------------------------------------------------------------------------------------

## 0.4.0 - 15 Jul 2018

1. Templates 
   - Fixed issue of truncating the saved mappings for the columns 
   - Added the ability to define conversions that are to be used when logging in as admin
   - When the template is created, an athena table & default query are created 
   - When a template is edited, the status is set to sync, with the ability to sync the template
   - A user can upload a file with sample data for mapping from which the header and sample row are selected 
   - Added target and ordering columns to the mapping 
   - The mapping rules have been added to the SQS message 
2. Asynchronous execution of scripts
   - Hadopp & MPP Database start and stop, run for Simulator, FileWatcher and Queries now execute in the back end returning output to the user immediately
   - The output of each execution is saved in a log file with the uuid of the execution, which file is uploaded to an S3 bucket and the link saved in the statusresult field
   - When a user clicks on the status, the contents of the file are automatically read from S3 and displayed 
   - FileWatcher, Query and Simulator still retain the capability to run interactively which opens a dialog and blocks all input until completed 
3. Log files uploaded to S3 with a link provided in the Status filed  
   - Hadoop and MPP start/stop actions
   - Run for Simulator, FileWatcher and Queries
   - Added a new shell script uploadtos3.sh which is used to upload any file given the necessary credentials 
   - Url are presigned to be available for 3 months which is defined in config.yaml   
4. Added documentation to the parameters received by the scripts that run executions in each of the files  
5. Queries - moved athena processing to a shell script from PHP 
6. Tables: 
   * Ability to search for files in the table directory 

Deployment instructions:
===

1. Unzip package 

2. Backup your existing scripts as these will be overwritten

3. Copy files

4. Add the following parameters to config.yaml 

   * tables.templates_rows_per_page: 4
   * s3.presignduration: 7890000

5. Add the following under the shell: parameter in config.yaml    

   * accountCreateFile: admin/createaccount.sh
   * accountDeleteFile: admin/deleteaccount.sh
   * accountUpdateFile: admin/updateaccount.sh
   * athenaTableCreateFile: createathenatable.sh
   * athenaTableUpdateFile: updateathenatable.sh
   * conversionActivateFile: admin/activateconversion.sh
   * conversionCreateFile: admin/createconversion.sh
   * conversionDeleteFile: admin/deleteconversion.sh
   * conversionUpdateFile: admin/updateconversion.sh
   * tableSearchFile: tablesearchfiles.sh
   * templateSyncFile: synctemplate.sh

6. Run the script in sql/0.4.0.sql

7. Run deploy.sh to set permissions & clear cache `sh /var/www/html/oncloudtime/deploy.sh`

8. Ensure the server is running with the latest versions of the AWS Cli environment using the commands at https://docs.aws.amazon.com/cli/latest/userguide/awscli-install-linux.html 

   * aws-cli/1.14.60 
   * Python/3.6.4 
   * botocore/1.9.13

Known Issues:
===

1. Search for files in the tables, does not pass the search criteria currently shows all files 

------------------------------------------------------------------------------------------------------------------------

## 0.3.13 - 17 Jun 2018

1. Templates: 
   - Fixed re-ordering of columns in mapping 
2. Fixed timeouts for long running scripts

Deployment instructions:

1. Unzip package 
2. Copy files  
3. Add the following parameter to config.yaml which determines the number of rows to show on the wizard page 
   * tables.templates_rows_per_page: 5
4. Run deploy.sh to set permissions & clear cache `sh /var/www/html/oncloudtime/deploy.sh`
5. Change the following values to unlimited `sudo vi /etc/php.ini`
   * max_input_time = -1
   * max_execution_time = 0     
   * memory_limit = -1

---

## 0.3.12 - 10 Jun 2018

1. Templates: 
   - Saving and editing functionality  
   - Can be made active or inactive 
   - Inactive templates can be deleted 
   - Active templates are displayed in the S3 file upload 
2. Logging
   - Added logging first around the execution of the shell commands 
   - Log file is found in var/log/oncloudtime-prod.log 

Deployment instructions:

1. Unzip package 
2. Copy files  
3. Add the following parameter to config.yaml which determines the amount of information showin the logs. Change to debug to see the output of the shell commandas 
   * log.level: info 
4. Run the script in sql/0.3.12.sql
5. Run deploy.sh to set permissions & clear cache `sh /var/www/html/oncloudtime/deploy.sh` 

---

## 0.3.11 - 4 June 2018

1. Added company name configuration parameter to config.yaml

2. Notifications: 

   * Capitalized the first letter of each of the form field names
   * Added icons to show read and unread status for notifications 
   * Updated the count to show the number of unread notifications 
   * Added the ability to mark a notification as read when a user clicks on it 
   * Added a color column to the notification which is used as a background color 

3. Fixed the changing of the x in the modal to the words Cancel and Close 

4. Miscellaneous updates

   * Added status_result column to all tables - customreport, filewatcher, hadoop_status, mpp_status, simulation 
   * The link on the status column is only shown when there is a value
   * Added a color column to hadoop_status and mpp_status that defaults to orange during creation 
   * When hadoop/mpp is started the color is changed to green and when stopped the color changes to red  
   * In the status_result and output of runs (Watcher, Simulator and Queries )any http and https urls will be automatically recognized and rendered as a link that opens in a new window 

5. Templates 

   * Added the ability to define a template and map the columns in a sample row that is provided (the template does not save)

Deployment instructions:

1. Unzip package 
2. Copy files 
3. Add the following configuration parameters to config/config.yaml
   * company.name: "OnCloudTime"
4. Run the script in sql/0.3.10.sql
5. Run deploy.sh to set permissions & clear cache `sh /var/www/html/oncloudtime/deploy.sh` 

---

## 0.3.10 - 31 May 2018

1. Styling fix to show the Copyright on the home page 
2. Styling change for the pagination buttons from an oval to a circle 
3. Added htaccess to remove php urls  

Deployment instructions:

1. Unzip package 
2. Copy files 
3. Copy the htaccess file `mv /var/www/html/oncloudtime/public/htaccess /var/www/html/oncloudtime/public/.htaccess`

---

## 0.3.9 - 31 May 2018

1. Ensure all tables do not wrap by truncating all long values to 20 characters 
2. When a FileWatcher, Simulation or Query is run a Cancel button is shown, when the execution completes a Close button is displayed
3. Reduced the time for which the notification alerts remain to 5 seconds
4. Notifications are not added to the top of list rather than the bottom so that they are readily accessible 
5. The timestamp in the SQS message has been changed from a number to a formatted date with microseconds e.g.,     
   2018-05-30 22:57:12.891829
6. Fixed size of pagination buttons to be consistent across multiple screen resolutions 

Deployment instructions:

1. Unzip package 
2. Copy files 
3. Run deploy.sh to set permissions `sh /var/www/html/oncloudtime/deploy.sh`
4. Udpate config/config.yaml
   * Change the value of tables.long_text_display_characters to 20 

Known issues

- Editing of tables is currently not working 
- Installer still has an error on saving and creating the environment, when the error occurs refresh and resubmit the form to continue 
- When a user clicks one of the truncated elements when a notification is still open, the modal for the truncated element content appears behind a dark transparent background. The only fix is to refresh the page 

---

## 0.3.7 - 29 May 2018

1. CSS changes to fit the dashboard to the height of the page 
2. Functionality to close inactive menu items

Deployment instructions 

1. Unzip package 
2. Copy files 

---

## 0.3.6 - 29 May 2018

1. Changed Metadata in File to Template
2. Combined changes from the 0.3.4 and 0.3.5 into a single package

Deployment instructions 

1. Unzip package 
2. Copy files 
3. Run script 0.3.4.sql
4. Run the deploy.sh script to ensure all permissions are well set `sh /var/www/html/oncloudtime/deploy.sh`

Known issues

- Editing of tables is currently not working 
- Installer still has an error on saving and creating the environment, when the error occurs refresh and resubmit the form to continue 

---

## 0.3.5 - 28 May 2018

1. Make the navigation buttons smaller 
2. Changed the headings for the dashboards to be consistent across the application 

Deployment Instructions 

1. Unzip package 
2. Copy files 
3. Virtual Host Setup - remove PHP from url and access app from domain 
   * Copy the virtual host file to the Apache config folder `sudo cp /var/www/html/oncloudtime/config/oncloudtime.conf /etc/httpd/conf.d`
   * Restart Apache `sudo service httpd restart`
   * The app should now be available from http://www.oncloudtime.com/
   * NOTE: DO NOT PROCEED TO INSTALL THE CERTIFICATE IF THIS STEP FAILS
4. Setup SSL Certificate via Let's Encrypt 
   * Install git `sudo yum install git`
   * Clone letsencrypt in /opt/letsencrypt folder `sudo git clone https://github.com/certbot/certbot.git /opt/letsencrypt`
   * Generate the certificate `/opt/letsencrypt/letsencrypt-auto --debug -d oncloudtime.com --email yawef@me.com --agree-tos`
   * When prompted "Please choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access.", select Option 2 Redirect - Make all requests redirect to secure HTTPS access. Choose this for new sites, or if you're confident your site works on HTTPS. You can undo this change by editing your web server's configuration.
   * Restart Apache `sudo service httpd restart`
   * The app should now be available from https://www.oncloudtime.com/
5. In case of any errors do the following:
   * Delete the SSL certificate `sudo /opt/eff.org/certbot/venv/bin/certbot delete`
   * Delete the virtual host configuration `sudo rm /etc/httpd/conf.d/oncloudtime*`
   * Restart Apache `sudo service httpd restart`

Known issues

- Editing of tables is currently not working 
- Installer still has an error on saving and creating the environment, when the error occurs refresh and resubmit the form to continue 

---

## 0.3.4 - 27 May 2018

1. Fixed issue with edit popups remaining with data on closing and trying to create 
2. Reduced space usage by putting the title of the module in the middle, removing duplicate heading and refresh to be next to create (+)
3. When Queries, File Watcher and Simulators are run, the status is changed to Completed and the timestamp of the run is also shown. The column format for the date field has been changed from date to datetime to show the time of execution 
4. Changed the Previous and Next buttons to arrows, and reduced the sizes of the text in the pagination 

Deployment instructions 

1. Unzip package 
2. Copy files 
3. Run script 0.3.4.sql
4. Run the deploy.sh script to ensure all permissions are well set `sh /var/www/html/oncloudtime/deploy.sh`

---

## 0.3.3 - 26 May 2018

1. Clear forms after successful submission 
2. Reduced the size of the pagination buttons on the tables 
3. Pass uuid to all scripts and echo its parameter in all scripts 
4. Temporarily removed the copyright due to overlay issues 
5. Fixed the size of the modal for queries, file watcher and simulator executions plus adding a scroll bar when the contents fill existing screen
6. Notification cleanup:
7. Notifications at the beginning of an action are tagged as info not warning
8. Resized the notification drop down to fit in the page 
9. Changed wrapping for the actual notifications so that they grow vertically instead of horizontally
10. Changed the format of the message from JSON to comma delimited name=value pairs

Deployment instructions 

1. Unzip package 
2. Copy files 
3. Add execute permissions to the shell scripts`sudo chmod -R +rx /var/www/html/oncloudtime/shell/`

Known issues

- Editing of tables is currently not working 
- Installer still has an error on saving and creating the environment 

---

## 0.3.2 - 25 May 2018

1. Extracted parameters changed by the installer into install.yaml file. Initial parameters allow the app to connect to the staging environment before configuration
2. Each entity has a new uuid value passed as a Key attribute to SQS
3. Styling: 
   - All buttons are the same size
   - Pages do not have scroll bars 
   - Copyright text appears in the center on the home page and in the sidebar when a user is logged in 
   - Logo at the top links to the dashboard 
     4.Added button status values to File Watcher, Query and Simulation with color coding from color column
4. Notifications persist on the page
5. Shell scripts receive all parameters displayed on a page including the athena database and directory
6. The production .env file has debug set to 1 to show debug errors to support troubleshooting during deployment 

Deployment instructions - full package

1. Setup a new server following the steps at [docs/server-setup.md]
2. Download the package into the new folder and unzip it 
3. Run the sql/new_install.sql script on the newly created database  
4. Update the file permissions for the different folders
   * var (contains logs and cache) writeable by running `sudo chmod -R 777 /var/www/html/oncloudtime/var`  
   * config writeable by installer by running `sudo chmod -R 777 /var/www/html/oncloudtime/config`
   * Ensure the shell scripts have execute permissions `sudo chmod -R +rx /var/www/html/oncloudtime/shell/`
5. Open http://youripaddress/oncloudtime/public/index.php which will start the login page. You will need to set an exception for the dummy certificate  
6. Default inbuilt user accounts:
   * ATS003/12345678
   * ATS004/12345678

   Open Issues:

   - After submitting the install a compile error occurs, just refresh for the steps to be completed 

---

## 0.3.0 - 20 May 2018

1. Migration from Silex to Symfony4 which has a different directory structure 
2. Application security:
3. Implemented user login and secured access for all urls
4. When a user logs in from a url in the app say hadoop they are redirected to the same page once login completes   
5. Shell scripts no longer require to have any paths to them, as the application will automatically resolve the paths 
6. Hadoop/MPP 
7. The actions are dependent on the status, for example when created the services can only be started, when started can only be stopped 
8. Pagination added to all tables 
9. Configuration 
10. Installer writes to the config/install.yaml file 
11. Non-installer based configurations are found in the config/config.yaml file 
12. Nested variables are not supported so the nesting has been replaced with an underscore notation 
13. The path to the script file names is not needed anymore as this can be determined relative to the shell directory 

Deployment instructions:

- Rename the old app `mv var/www/html/oncloudtime /var/www/oncloudtime_old`
- Create a new folder `mv /var/www/html/oncloudtime` 
- Copy the zip file into the new folder and unzip it 
- Create a new blank database with utf8 characterset `CREATE DATABASE oncloudtime CHARACTER SET utf8 COLLATE utf8_general_ci;` 
- Run the sql/new_install.sql script on the newly created database  
- Make the following directories writeable:
  * var (contains logs and cache) writeable by running `sudo chmod -R 777 /var/www/html/oncloudtime/var`
  * var/data for temporary upload files before s3 `sudo chmod -R 777 /var/www/html/oncloudtime/var/data`
  * config for the installer `sudo chmod -R 775 /var/www/html/oncloudtime/config`
- Make the shell scripts executeable by running `sudo chmod -R +rx /var/www/html/oncloudtime/shell/`
- Edit config/config.yaml file to add any additional configuration parameters (if needed): 
  * aws.region default region for sqs, athena clients 
  * s3.region default region for s3 bucket to be created 
- Need to install mod_ssl for httpd 24 explicitly `sudo yum install mod24_ssl.x86_64`
- Restart httpd should be able to get to ssl `sudo service httpd restart`
- Open https://youripaddress/oncloudtime/public/index.php which will start the login page. You will need to set an exception for the dummy certificate  
- Default inbuilt user accounts:
  * ATS003/12345678
  * ATS004/12345678

Known issues

- Editing of tables is currently not working
---

## 0.2.7 - May 7, 2018

- Adding a new logo and favicon 
- Changed the login page from brown to "whitesmoke"
- Menu updates:
  * Added icons to each item
  * Renamed MPP Datatbase to Database
  * Renamed S3 to File with new submenus: File Watcher, File Templates, File Upload
  * Renamed SQS to Activities 
- Added ability to select a template when uploading a file 
- The queue notification for the file upload now includes: template_id, account_id and user_id 

### Deployment instructions

- unzip and copy changed files
- copy the following configuration to the config.yml file 

tables:
    long_text_display_characters: 20

### Overriding colors in the app

- edit the app/assets/css/oncloudtime.css 

### Identified issues

- None of the required fields in any of the forms works - this needs to be fixed 

---

## 0.2 - April 27, 2018

1. Renamed EMR to Hadoop updating the table name to hadoop_status, views, routes and scripts  
2. Created a new menu MPP Database that is similar to Hadoop with a new table mpp_status 
3. Added oncloudtime.css and oncloudtime.js to enable custom stylesheets and Javascript functions to be isolated from the rest of the libraries 
4. The processing for runQuery.sh is transformed from markdown into a styling similar to the provided example image 
5. Added an iframe that shows the contents of a powerbi dashboard whose url is stored in 
6. Login now goes straight to the dashboard 
7. Fixed mis-alignment issues between the table headers and columns across the app  
8. Queries - added preview text with a link to show the description and code in a popup

### Deployment instructions:

- Unzip package 
- Copy the following two line configuration for the dashboard into the app/OnCloudTime/Config/config.yml file

dashboard:
    powerbiUrl: 'https://app.powerbi.com/view?r=eyJrIjoiZWQ0OGQ3NDktNDllMy00NDVlLTgwNjItYzYxZWE0ZDc1ZDdjIiwidCI6ImM3ZGZjNTk1LWU4OWUtNDQ4Ni1iNGM0LWI0NmRhZmFjMmU5NSIsImMiOjF9'

- Run the 0.2.3.sql script on your database 

## 0.1 - April 3, 2018

1. Errors are displayed at all times
2. Formatting of output from shell scripts in the query results view to show each line from the script instead of bundling everything as a blob
3. New extension added twig-function-php to enable running of php functions in twig templates 
4. Hard coded the versions of vendor libraries to ensure control over updates only when needed 
